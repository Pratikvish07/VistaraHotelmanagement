{"version":3,"file":"static/js/888.8b8cc3c7.chunk.js","mappings":"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","sources":["components/customers/CustomerManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db, auth } from '../../firebase-config';\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  addDoc,\r\n  query,\r\n  where\r\n} from 'firebase/firestore';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\n\r\nfunction CustomerManagement() {\r\n  const [customers, setCustomers] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n\r\n  const [newCustomer, setNewCustomer] = useState({\r\n    name: '',\r\n    aadhaar: '',\r\n    mobile: '',\r\n    email: ''\r\n  });\r\n\r\n  // ðŸ” Wait for auth\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, (currentUser) => {\r\n      setUser(currentUser);\r\n    });\r\n    return () => unsub();\r\n  }, []);\r\n\r\n  // ðŸ“¥ Fetch customers (user-wise)\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    const fetchCustomers = async () => {\r\n      const q = query(\r\n        collection(db, 'customers'),\r\n        where('createdBy', '==', user.uid)\r\n      );\r\n\r\n      const snapshot = await getDocs(q);\r\n      setCustomers(snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      })));\r\n    };\r\n\r\n    fetchCustomers();\r\n  }, [user]);\r\n\r\n  // âž• Create customer (AUTO CREATES COLLECTION)\r\n  const createCustomer = async () => {\r\n    if (!user) return alert('Not authenticated');\r\n\r\n    await addDoc(collection(db, 'customers'), {\r\n      ...newCustomer,\r\n      createdBy: user.uid,      // ðŸ”‘ REQUIRED\r\n      createdAt: new Date()\r\n    });\r\n\r\n    // Refresh list\r\n    const q = query(\r\n      collection(db, 'customers'),\r\n      where('createdBy', '==', user.uid)\r\n    );\r\n\r\n    const snapshot = await getDocs(q);\r\n    setCustomers(snapshot.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data()\r\n    })));\r\n\r\n    // Reset form\r\n    setNewCustomer({\r\n      name: '',\r\n      aadhaar: '',\r\n      mobile: '',\r\n      email: ''\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h1>Customer Management</h1>\r\n\r\n      {/* âž• Add Customer */}\r\n      <div style={{ marginBottom: '30px' }}>\r\n        <h3>Add Customer</h3>\r\n\r\n        <input\r\n          placeholder=\"Name\"\r\n          value={newCustomer.name}\r\n          onChange={(e) =>\r\n            setNewCustomer({ ...newCustomer, name: e.target.value })\r\n          }\r\n        />\r\n\r\n        <input\r\n          placeholder=\"Aadhaar Number\"\r\n          value={newCustomer.aadhaar}\r\n          onChange={(e) =>\r\n            setNewCustomer({ ...newCustomer, aadhaar: e.target.value })\r\n          }\r\n        />\r\n\r\n        <input\r\n          placeholder=\"Mobile Number\"\r\n          value={newCustomer.mobile}\r\n          onChange={(e) =>\r\n            setNewCustomer({ ...newCustomer, mobile: e.target.value })\r\n          }\r\n        />\r\n\r\n        <input\r\n          placeholder=\"Email\"\r\n          value={newCustomer.email}\r\n          onChange={(e) =>\r\n            setNewCustomer({ ...newCustomer, email: e.target.value })\r\n          }\r\n        />\r\n\r\n        <br />\r\n        <button onClick={createCustomer}>Add Customer</button>\r\n      </div>\r\n\r\n      {/* ðŸ“‹ Customer List */}\r\n      <h3>Registered Customers</h3>\r\n\r\n      {customers.length === 0 && <p>No customers found</p>}\r\n\r\n      {customers.map((customer) => (\r\n        <div\r\n          key={customer.id}\r\n          style={{ border: '1px solid #ccc', padding: '10px', marginBottom: '10px' }}\r\n        >\r\n          <p><strong>Name:</strong> {customer.name}</p>\r\n          <p><strong>Aadhaar:</strong> {customer.aadhaar}</p>\r\n          <p><strong>Mobile:</strong> {customer.mobile}</p>\r\n          <p><strong>Email:</strong> {customer.email}</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CustomerManagement;"],"names":["customers","setCustomers","useState","user","setUser","newCustomer","setNewCustomer","name","aadhaar","mobile","email","useEffect","unsub","onAuthStateChanged","auth","currentUser","async","q","query","collection","db","where","uid","snapshot","getDocs","docs","map","doc","_objectSpread","id","data","fetchCustomers","_jsxs","style","padding","children","_jsx","marginBottom","placeholder","value","onChange","e","target","onClick","alert","addDoc","createdBy","createdAt","Date","length","customer","border"],"ignoreList":[],"sourceRoot":""}