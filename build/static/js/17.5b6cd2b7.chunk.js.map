{"version":3,"file":"static/js/17.5b6cd2b7.chunk.js","mappings":"6RAmHA,QAvGA,WACE,MAAMA,GAAWC,EAAAA,EAAAA,OAEVC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAYC,IAAiBJ,EAAAA,EAAAA,WAAS,IACtCK,EAAMC,IAAWN,EAAAA,EAAAA,UAAS,OAC1BO,EAAOC,IAAYR,EAAAA,EAAAA,UAAS,IAmDnC,OAjDAS,EAAAA,EAAAA,WAAU,KACR,MAAMC,GAAQC,EAAAA,EAAAA,IAAmBC,EAAAA,GAAMC,UACrC,GAAIC,EAAa,CACfR,EAAQQ,GAER,MAAMC,GAAMC,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAASH,EAAYI,KACnCC,QAAaC,EAAAA,EAAAA,IAAOL,GAE1B,GAAII,EAAKE,SAAU,CACjB,MAAMC,EAAOH,EAAKI,OAAOD,KACD1B,EAAX,YAAT0B,EAA6B,aACnB,QAChB,CACF,IAGF,MAAO,IAAMZ,KACZ,CAACd,KAiCF4B,EAAAA,EAAAA,KAACC,EAAAA,EAAS,CAACC,OAAK,EAACC,UAAU,gDAA+CC,UACxEJ,EAAAA,EAAAA,KAACK,EAAAA,EAAG,CAACF,UAAU,+BAA8BC,UAC3CJ,EAAAA,EAAAA,KAACM,EAAAA,EAAG,CAACC,GAAI,EAAEH,UACTJ,EAAAA,EAAAA,KAACQ,EAAAA,EAAI,CAACL,UAAU,SAAQC,UACtBK,EAAAA,EAAAA,MAACD,EAAAA,EAAKE,KAAI,CAAAN,SAAA,EACRJ,EAAAA,EAAAA,KAAA,MAAIG,UAAU,mBAAkBC,SAC7BzB,EAAa,iBAAmB,UAGlCI,IAASiB,EAAAA,EAAAA,KAACW,EAAAA,EAAK,CAACC,QAAQ,SAAQR,SAAErB,KAEnC0B,EAAAA,EAAAA,MAACI,EAAAA,EAAI,CAACC,SA1CCzB,UACjB0B,EAAEC,iBACFhC,EAAS,IAET,IACE,GAAIL,EAAY,CACd,MAAMsC,QAAYC,EAAAA,EAAAA,IAChB9B,EAAAA,GACAd,EAAM6C,OACN1C,EAAS0C,cAGLC,EAAAA,EAAAA,KAAO5B,EAAAA,EAAAA,IAAIC,EAAAA,GAAI,QAASwB,EAAIpC,KAAKa,KAAM,CAC3CpB,QACAwB,KAAM,WACNuB,UAAW,IAAIC,MAEnB,YACQC,EAAAA,EAAAA,IACJnC,EAAAA,GACAd,EAAM6C,OACN1C,EAAS0C,OAGf,CAAE,MAAOK,GACPC,QAAQ1C,MAAMyC,GACdxC,EAASwC,EAAIE,KACf,GAeqCtB,SAAA,EACzBK,EAAAA,EAAAA,MAACI,EAAAA,EAAKc,MAAK,CAACxB,UAAU,OAAMC,SAAA,EAC1BJ,EAAAA,EAAAA,KAACa,EAAAA,EAAKe,MAAK,CAAAxB,SAAC,WACZJ,EAAAA,EAAAA,KAACa,EAAAA,EAAKgB,QAAO,CACXC,KAAK,QACLC,MAAOzD,EACP0D,SAAWjB,GAAMxC,EAASwC,EAAEkB,OAAOF,OACnCG,UAAQ,QAIZzB,EAAAA,EAAAA,MAACI,EAAAA,EAAKc,MAAK,CAACxB,UAAU,OAAMC,SAAA,EAC1BJ,EAAAA,EAAAA,KAACa,EAAAA,EAAKe,MAAK,CAAAxB,SAAC,cACZJ,EAAAA,EAAAA,KAACa,EAAAA,EAAKgB,QAAO,CACXC,KAAK,WACLC,MAAOtD,EACPuD,SAAWjB,GAAMrC,EAAYqC,EAAEkB,OAAOF,OACtCG,UAAQ,QAIZlC,EAAAA,EAAAA,KAACmC,EAAAA,EAAM,CAACL,KAAK,SAAS3B,UAAU,QAAOC,SACpCzB,EAAa,WAAa,uBAS7C,C","sources":["components/auth/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Card, Form, Button, Alert } from 'react-bootstrap';\r\nimport { useNavigate } from 'react-router-dom'; // ✅ FIX\r\nimport { auth, db } from '../../firebase-config';\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  signOut,\r\n  onAuthStateChanged\r\n} from 'firebase/auth';\r\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\r\n\r\nfunction Login() {\r\n  const navigate = useNavigate(); // ✅ FIX\r\n\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isRegister, setIsRegister] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    const unsub = onAuthStateChanged(auth, async (currentUser) => {\r\n      if (currentUser) {\r\n        setUser(currentUser);\r\n\r\n        const ref = doc(db, 'users', currentUser.uid);\r\n        const snap = await getDoc(ref);\r\n\r\n        if (snap.exists()) {\r\n          const role = snap.data().role;\r\n          if (role === 'manager') navigate('/dashboard');\r\n          else navigate('/home');\r\n        }\r\n      }\r\n    });\r\n\r\n    return () => unsub();\r\n  }, [navigate]);\r\n\r\n  const handleAuth = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    try {\r\n      if (isRegister) {\r\n        const res = await createUserWithEmailAndPassword(\r\n          auth,\r\n          email.trim(),\r\n          password.trim()\r\n        );\r\n\r\n        await setDoc(doc(db, 'users', res.user.uid), {\r\n          email,\r\n          role: 'employee',\r\n          createdAt: new Date()\r\n        });\r\n      } else {\r\n        await signInWithEmailAndPassword(\r\n          auth,\r\n          email.trim(),\r\n          password.trim()\r\n        );\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      setError(err.code);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container fluid className=\"min-vh-100 d-flex align-items-center bg-light\">\r\n      <Row className=\"w-100 justify-content-center\">\r\n        <Col md={4}>\r\n          <Card className=\"shadow\">\r\n            <Card.Body>\r\n              <h4 className=\"text-center mb-3\">\r\n                {isRegister ? 'Create Account' : 'Login'}\r\n              </h4>\r\n\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n\r\n              <Form onSubmit={handleAuth}>\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Email</Form.Label>\r\n                  <Form.Control\r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    required\r\n                  />\r\n                </Form.Group>\r\n\r\n                <Form.Group className=\"mb-3\">\r\n                  <Form.Label>Password</Form.Label>\r\n                  <Form.Control\r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                  />\r\n                </Form.Group>\r\n\r\n                <Button type=\"submit\" className=\"w-100\">\r\n                  {isRegister ? 'Register' : 'Login'}\r\n                </Button>\r\n              </Form>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"names":["navigate","useNavigate","email","setEmail","useState","password","setPassword","isRegister","setIsRegister","user","setUser","error","setError","useEffect","unsub","onAuthStateChanged","auth","async","currentUser","ref","doc","db","uid","snap","getDoc","exists","role","data","_jsx","Container","fluid","className","children","Row","Col","md","Card","_jsxs","Body","Alert","variant","Form","onSubmit","e","preventDefault","res","createUserWithEmailAndPassword","trim","setDoc","createdAt","Date","signInWithEmailAndPassword","err","console","code","Group","Label","Control","type","value","onChange","target","required","Button"],"ignoreList":[],"sourceRoot":""}