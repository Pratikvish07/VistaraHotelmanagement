"use strict";(self.webpackChunkhotel_management_system=self.webpackChunkhotel_management_system||[]).push([[957],{7957(e,n,t){t.r(n),t.d(n,{default:()=>de});var a=t(2555),s=t(5043),o=t(303),r=t(6667),c=t(6020),l=t(6068),i=t(45),d=t(8139),u=t.n(d),m=t(7852),h=t(579);const x=["bsPrefix","bg","pill","text","className","as"],b=s.forwardRef((e,n)=>{let{bsPrefix:t,bg:s="primary",pill:o=!1,text:r,className:c,as:l="span"}=e,d=(0,i.A)(e,x);const b=(0,m.oU)(t,"badge");return(0,h.jsx)(l,(0,a.A)((0,a.A)({ref:n},d),{},{className:u()(c,b,o&&"rounded-pill",r&&"text-".concat(r),s&&"bg-".concat(s))}))});b.displayName="Badge";const p=b;var A=t(3519),f=t(1072),g=t(8602),j=t(4282),y=t(8628),N=t(1719);const v=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],w=s.forwardRef((e,n)=>{let{bsPrefix:t,className:s,striped:o,bordered:r,borderless:c,hover:l,size:d,variant:x,responsive:b}=e,p=(0,i.A)(e,v);const A=(0,m.oU)(t,"table"),f=u()(s,A,x&&"".concat(A,"-").concat(x),d&&"".concat(A,"-").concat(d),o&&"".concat(A,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),r&&"".concat(A,"-bordered"),c&&"".concat(A,"-borderless"),l&&"".concat(A,"-hover")),g=(0,h.jsx)("table",(0,a.A)((0,a.A)({},p),{},{className:f,ref:n}));if(b){let e="".concat(A,"-responsive");return"string"===typeof b&&(e="".concat(e,"-").concat(b)),(0,h.jsx)("div",{className:e,children:g})}return g});w.displayName="Table";const C=w;var k,R=t(3814),E=t(3043),D=t(8279),F=t(182),S=t(8260);function P(e){if((!k&&0!==k||e)&&D.A){var n=document.createElement("div");n.style.position="absolute",n.style.top="-9999px",n.style.width="50px",n.style.height="50px",n.style.overflow="scroll",document.body.appendChild(n),k=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return k}var U=t(6618),T=t(8293);function B(e){const n=function(e){const n=(0,s.useRef)(e);return n.current=e,n}(e);(0,s.useEffect)(()=>()=>n.current(),[])}var H=t(4232),M=t(6651),V=t(5675),_=t(8072);const O=["className","bsPrefix","as"],z=s.forwardRef((e,n)=>{let{className:t,bsPrefix:s,as:o="div"}=e,r=(0,i.A)(e,O);return s=(0,m.oU)(s,"modal-body"),(0,h.jsx)(o,(0,a.A)({ref:n,className:u()(t,s)},r))});z.displayName="ModalBody";const I=z;var K=t(1602);const L=["bsPrefix","className","contentClassName","centered","size","fullscreen","children","scrollable"],G=s.forwardRef((e,n)=>{let{bsPrefix:t,className:s,contentClassName:o,centered:r,size:c,fullscreen:l,children:d,scrollable:x}=e,b=(0,i.A)(e,L);t=(0,m.oU)(t,"modal");const p="".concat(t,"-dialog"),A="string"===typeof l?"".concat(t,"-fullscreen-").concat(l):"".concat(t,"-fullscreen");return(0,h.jsx)("div",(0,a.A)((0,a.A)({},b),{},{ref:n,className:u()(p,s,c&&"".concat(t,"-").concat(c),r&&"".concat(p,"-centered"),x&&"".concat(p,"-scrollable"),l&&A),children:(0,h.jsx)("div",{className:u()("".concat(t,"-content"),o),children:d})}))});G.displayName="ModalDialog";const W=G,q=["className","bsPrefix","as"],J=s.forwardRef((e,n)=>{let{className:t,bsPrefix:s,as:o="div"}=e,r=(0,i.A)(e,q);return s=(0,m.oU)(s,"modal-footer"),(0,h.jsx)(o,(0,a.A)({ref:n,className:u()(t,s)},r))});J.displayName="ModalFooter";const Z=J;var Q=t(2258);const X=["bsPrefix","className","closeLabel","closeButton"],Y=s.forwardRef((e,n)=>{let{bsPrefix:t,className:s,closeLabel:o="Close",closeButton:r=!1}=e,c=(0,i.A)(e,X);return t=(0,m.oU)(t,"modal-header"),(0,h.jsx)(Q.A,(0,a.A)((0,a.A)({ref:n},c),{},{className:u()(s,t),closeLabel:o,closeButton:r}))});Y.displayName="ModalHeader";const $=Y;var ee=t(4488);const ne=["className","bsPrefix","as"],te=(0,ee.A)("h4"),ae=s.forwardRef((e,n)=>{let{className:t,bsPrefix:s,as:o=te}=e,r=(0,i.A)(e,ne);return s=(0,m.oU)(s,"modal-title"),(0,h.jsx)(o,(0,a.A)({ref:n,className:u()(t,s)},r))});ae.displayName="ModalTitle";const se=ae,oe=["bsPrefix","className","style","dialogClassName","contentClassName","children","dialogAs","data-bs-theme","aria-labelledby","aria-describedby","aria-label","show","animation","backdrop","keyboard","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function re(e){return(0,h.jsx)(_.A,(0,a.A)((0,a.A)({},e),{},{timeout:null}))}function ce(e){return(0,h.jsx)(_.A,(0,a.A)((0,a.A)({},e),{},{timeout:null}))}const le=s.forwardRef((e,n)=>{let{bsPrefix:t,className:o,style:r,dialogClassName:c,contentClassName:l,children:d,dialogAs:x=W,"data-bs-theme":b,"aria-labelledby":p,"aria-describedby":A,"aria-label":f,show:g=!1,animation:j=!0,backdrop:y=!0,keyboard:N=!0,onEscapeKeyDown:v,onShow:w,onHide:C,container:k,autoFocus:R=!0,enforceFocus:_=!0,restoreFocus:O=!0,restoreFocusOptions:z,onEntered:I,onExit:L,onExiting:G,onEnter:q,onEntering:J,onExited:Z,backdropClassName:Q,manager:X}=e,Y=(0,i.A)(e,oe);const[$,ee]=(0,s.useState)({}),[ne,te]=(0,s.useState)(!1),ae=(0,s.useRef)(!1),se=(0,s.useRef)(!1),le=(0,s.useRef)(null),[ie,de]=(0,s.useState)(null),ue=(0,T.A)(n,de),me=(0,U.A)(C),he=(0,m.Wz)();t=(0,m.oU)(t,"modal");const xe=(0,s.useMemo)(()=>({onHide:me}),[me]);function be(){return X||(0,V.R)({isRTL:he})}function pe(e){if(!D.A)return;const n=be().getScrollbarWidth()>0,t=e.scrollHeight>(0,F.A)(e).documentElement.clientHeight;ee({paddingRight:n&&!t?P():void 0,paddingLeft:!n&&t?P():void 0})}const Ae=(0,U.A)(()=>{ie&&pe(ie.dialog)});B(()=>{(0,S.A)(window,"resize",Ae),null==le.current||le.current()});const fe=()=>{ae.current=!0},ge=e=>{ae.current&&ie&&e.target===ie.dialog&&(se.current=!0),ae.current=!1},je=()=>{te(!0),le.current=(0,H.A)(ie.dialog,()=>{te(!1)})},ye=e=>{"static"!==y?se.current||e.target!==e.currentTarget?se.current=!1:null==C||C():(e=>{e.target===e.currentTarget&&je()})(e)},Ne=(0,s.useCallback)(e=>(0,h.jsx)("div",(0,a.A)((0,a.A)({},e),{},{className:u()("".concat(t,"-backdrop"),Q,!j&&"show")})),[j,Q,t]),ve=(0,a.A)((0,a.A)({},r),$);ve.display="block";return(0,h.jsx)(K.A.Provider,{value:xe,children:(0,h.jsx)(M.A,{show:g,ref:ue,backdrop:y,container:k,keyboard:!0,autoFocus:R,enforceFocus:_,restoreFocus:O,restoreFocusOptions:z,onEscapeKeyDown:e=>{N?null==v||v(e):(e.preventDefault(),"static"===y&&je())},onShow:w,onHide:C,onEnter:(e,n)=>{e&&pe(e),null==q||q(e,n)},onEntering:(e,n)=>{null==J||J(e,n),(0,E.Ay)(window,"resize",Ae)},onEntered:I,onExit:e=>{null==le.current||le.current(),null==L||L(e)},onExiting:G,onExited:e=>{e&&(e.style.display=""),null==Z||Z(e),(0,S.A)(window,"resize",Ae)},manager:be(),transition:j?re:void 0,backdropTransition:j?ce:void 0,renderBackdrop:Ne,renderDialog:e=>(0,h.jsx)("div",(0,a.A)((0,a.A)({role:"dialog"},e),{},{style:ve,className:u()(o,t,ne&&"".concat(t,"-static"),!j&&"show"),onClick:y?ye:void 0,onMouseUp:ge,"data-bs-theme":b,"aria-label":f,"aria-labelledby":p,"aria-describedby":A,children:(0,h.jsx)(x,(0,a.A)((0,a.A)({},Y),{},{onMouseDown:fe,className:c,contentClassName:l,children:d}))}))})})});le.displayName="Modal";const ie=Object.assign(le,{Body:I,Header:$,Title:se,Footer:Z,Dialog:W,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});const de=function(){const[e,n]=(0,s.useState)([]),[t,i]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[m,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[w,k]=(0,s.useState)(null),[E,D]=(0,s.useState)({roomNumber:"",type:"",price:"",paymentMethod:"",paymentReceived:!1,isVacant:!0,cleaningDone:!0,documentUrl:"",documentFile:null});(0,s.useEffect)(()=>{const e=(0,c.hg)(o.j2,i);return()=>e()},[]),(0,s.useEffect)(()=>{if(!t)return;(async()=>{const e=await(0,r.x7)((0,r.H9)(o.db,"users",t.uid));e.exists()&&u(e.data().role)})()},[t]);const F=async()=>{if(!t)return;const e=(0,r.P)((0,r.rJ)(o.db,"rooms"),(0,r._M)("createdBy","==",t.uid)),s=await(0,r.GG)(e);n(s.docs.map(e=>(0,a.A)({id:e.id},e.data())))};(0,s.useEffect)(()=>{F()},[t]);const S=async(e,n,t)=>{const a={[n]:t};"isVacant"===n&&(a.status=t?"available":"occupied"),await(0,r.mZ)((0,r.H9)(o.db,"rooms",e),a),F()};return(0,h.jsxs)(A.A,{fluid:!0,className:"py-4",children:[(0,h.jsx)(f.A,{className:"mb-4",children:(0,h.jsxs)(g.A,{children:[(0,h.jsx)(j.A,{variant:"outline-secondary",onClick:()=>navigate("/dashboard"),className:"mb-3 me-3",children:"\u2190 Back to Dashboard"}),(0,h.jsx)("h1",{children:"Room Management"})]})}),"manager"===d&&(0,h.jsx)(j.A,{className:"mb-3",onClick:()=>x(!0),children:"Add Room"}),(0,h.jsx)(y.A,{children:(0,h.jsx)(y.A.Body,{children:0===e.length?(0,h.jsx)(N.A,{children:"No rooms found"}):(0,h.jsxs)(C,{striped:!0,hover:!0,responsive:!0,children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:"Room"}),(0,h.jsx)("th",{children:"Type"}),(0,h.jsx)("th",{children:"Price"}),(0,h.jsx)("th",{children:"Status"}),(0,h.jsx)("th",{children:"Vacant"}),(0,h.jsx)("th",{children:"Cleaning"}),(0,h.jsx)("th",{children:"Payment"}),(0,h.jsx)("th",{children:"Document"}),(0,h.jsx)("th",{children:"Action"})]})}),(0,h.jsx)("tbody",{children:e.map(e=>{return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:e.roomNumber}),(0,h.jsx)("td",{children:e.type}),(0,h.jsxs)("td",{children:["\u20b9",e.price]}),(0,h.jsx)("td",{children:(n=e,n.isVacant?n.cleaningDone?(0,h.jsx)(p,{bg:"success",children:"Available"}):(0,h.jsx)(p,{bg:"warning",children:"Needs Cleaning"}):(0,h.jsx)(p,{bg:"danger",children:"Occupied"}))}),(0,h.jsx)("td",{children:(0,h.jsx)(R.A.Check,{type:"switch",checked:e.isVacant,onChange:n=>S(e.id,"isVacant",n.target.checked)})}),(0,h.jsx)("td",{children:(0,h.jsx)(R.A.Check,{type:"switch",checked:e.cleaningDone,onChange:n=>S(e.id,"cleaningDone",n.target.checked)})}),(0,h.jsx)("td",{children:(0,h.jsx)(R.A.Check,{type:"switch",checked:e.paymentReceived,onChange:n=>S(e.id,"paymentReceived",n.target.checked)})}),(0,h.jsx)("td",{children:e.documentUrl?(0,h.jsx)("a",{href:e.documentUrl,target:"_blank",rel:"noreferrer",children:"View"}):"\u2014"}),(0,h.jsx)("td",{children:"manager"===d&&(0,h.jsx)(j.A,{size:"sm",onClick:()=>{k(e),v(!0)},children:"Edit"})})]},e.id);var n})})]})})}),(0,h.jsxs)(ie,{show:m,onHide:()=>x(!1),children:[(0,h.jsx)(ie.Header,{closeButton:!0,children:(0,h.jsx)(ie.Title,{children:"Add Room"})}),(0,h.jsx)(ie.Body,{children:(0,h.jsxs)(R.A,{children:[(0,h.jsx)(R.A.Control,{className:"mb-2",placeholder:"Room Number",value:E.roomNumber,onChange:e=>D((0,a.A)((0,a.A)({},E),{},{roomNumber:e.target.value}))}),(0,h.jsxs)(R.A.Select,{className:"mb-2",value:E.type,onChange:e=>D((0,a.A)((0,a.A)({},E),{},{type:e.target.value})),children:[(0,h.jsx)("option",{value:"",children:"Select Type"}),(0,h.jsx)("option",{children:"Single"}),(0,h.jsx)("option",{children:"Double"}),(0,h.jsx)("option",{children:"Suite"}),(0,h.jsx)("option",{children:"Deluxe"})]}),(0,h.jsx)(R.A.Control,{type:"number",className:"mb-2",placeholder:"Price",value:E.price,onChange:e=>D((0,a.A)((0,a.A)({},E),{},{price:e.target.value}))}),(0,h.jsx)(R.A.Control,{type:"file",onChange:e=>D((0,a.A)((0,a.A)({},E),{},{documentFile:e.target.files[0]}))})]})}),(0,h.jsx)(ie.Footer,{children:(0,h.jsx)(j.A,{onClick:async()=>{if(!t)return alert("Not authenticated");let e="";if(E.documentFile){const n=(0,l.KR)(o.IG,"room-documents/".concat(t.uid,"/").concat(Date.now(),"_").concat(E.documentFile.name));await(0,l.D)(n,E.documentFile),e=await(0,l.qk)(n)}await(0,r.gS)((0,r.rJ)(o.db,"rooms"),{roomNumber:E.roomNumber,type:E.type,price:Number(E.price),paymentMethod:E.paymentMethod,paymentReceived:E.paymentReceived,isVacant:E.isVacant,cleaningDone:E.cleaningDone,status:E.isVacant?"available":"occupied",documentUrl:e,createdBy:t.uid,createdAt:new Date}),await F(),x(!1),D({roomNumber:"",type:"",price:"",paymentMethod:"",paymentReceived:!1,isVacant:!0,cleaningDone:!0,documentUrl:"",documentFile:null})},children:"Save"})})]}),(0,h.jsxs)(ie,{show:b,onHide:()=>v(!1),children:[(0,h.jsx)(ie.Header,{closeButton:!0,children:(0,h.jsx)(ie.Title,{children:"Edit Room"})}),(0,h.jsx)(ie.Body,{children:w&&(0,h.jsxs)(R.A,{children:[(0,h.jsx)(R.A.Control,{className:"mb-2",value:w.roomNumber,onChange:e=>k((0,a.A)((0,a.A)({},w),{},{roomNumber:e.target.value}))}),(0,h.jsx)(R.A.Control,{type:"number",value:w.price,onChange:e=>k((0,a.A)((0,a.A)({},w),{},{price:e.target.value}))})]})}),(0,h.jsx)(ie.Footer,{children:(0,h.jsx)(j.A,{onClick:async()=>{if(!w)return;let e=w.documentUrl||"";if(w.documentFile){const n=(0,l.KR)(o.IG,"room-documents/".concat(t.uid,"/").concat(Date.now(),"_").concat(w.documentFile.name));await(0,l.D)(n,w.documentFile),e=await(0,l.qk)(n)}await(0,r.mZ)((0,r.H9)(o.db,"rooms",w.id),(0,a.A)((0,a.A)({},w),{},{price:Number(w.price),status:w.isVacant?"available":"occupied",documentUrl:e})),v(!1),k(null),F()},children:"Update"})})]})]})}}}]);
//# sourceMappingURL=957.6e4c681b.chunk.js.map